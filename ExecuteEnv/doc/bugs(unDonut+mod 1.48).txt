■unDonut+mod.1.39 の既知のバグ  2008-11-02


こちらで認識している既知のバグや、報告件数の多いバグ等のメモです。

※他にもまだまだバグ報告ありますが、きりがないので簡単に書ける範囲で
  とりあえず。
※ ほとんどがお手上げなバグばかりなので、さらなる情報があれば
  教えていただけるとありがたいです。


・スクリプトの動作がおかしい場合がある/スクリプトエラーになる。
  ・たとえば
	http://www.windowsmedia.com/radiotuner/MyRadio.asp
    で曲がきけない。
  ・MSDN でスクロールバーが表示されない.

・お気に入りメニューのドラッグ＆ドロップでの移動時、
　・たまに移動に失敗する
　・フォルダ間移動した場合に指定の位置でなくメニューの最後になる
　・メニュー画面の更新がちゃんとされない場合がある、
　　（お気に入りメニューの縦数を制限して複数列になっている場合は確実に）

・お気に入りバー(エクスプローラバー中）でドラッグ＆ドロップでの移動時、
　・サブフォルダによっては、移動できない場合がある(多い?)
　・お気に入りメニューと違い挿入可能位置をあらわす形にカーソル矩形がならない。
　　（カーソル位置付近の項目の直前にインサートするのみ）
　・フォルダの一番最後への挿入がやりにくい(ほとんどできないかも)
　・画面の更新が、お気に入りバーの全書き直しになりやすい（更新のたびに表示
　　位置がリセットされる）

・お気に入りバーで削除を選ぶと、するか否かのダイアログがでるが、その時点で
　バーの表示から消えてしまう（実際の削除はダイアログでの選択どおり）

・donutオプション→メニュー→お気に入りで、ユーザー定義のフォルダを設定した
　場合、お気に入りメニューはそのようになるが、エクスプローラバーの
　お気に入りバーはIEのお気に入りのまま（本家undonutから、そのような仕様）

・on状態のハイライトボタンをクリックしてもoffにならない場合がある。また
　かってにoffになる場合がある。

・検索エンジン欄の幅を0にしボタンだけの状態にした場合に検索キーワード入力欄
  が空でフォーカスされていない時は検索エンジン名を表示するが、win2kだと
  フォーカスが移ってもまだエンジン名が表示されてしまう(何か入力すれば消える)


・32ビット版exeで、SKINにてXP Themeの設定していない状況でexeと同じフォルダ
  に〜.exe.manifestがある場合、不具合がでる環境があるらしい.
  (ひょっとすると XP Theme 関係なくかもだが、manifestファイルがあると、
   donutオプションのキーのショートカット一覧の罫線が狂ったり、文字化けしたり
   する環境があるらしい）

・64ビット版exeでは XP Themeの使用の有無にかかわらず、
  ・MultiByteChar版exeなら、exeと同じフォルダに〜.exe.manifestがないほうがよく
  ・UNICODE版exeなら、exeと同じフォルダに〜.exe.manifestがあったほうがよい.
  と思われる。
  (unicode版64undonut.exeではmanifestがないと、アドレスバーやDonutオプション
   等でツールチップヘルプが表示されない)


・ie6で見れるのに ie7 だと swf/スクリプトがらみでみれないページがある。
  改善策：
    2ch unDonut part16 #589 の報告のあったレジストリ設定
      HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_BLOCK_LMZ_SCRIPT
    か
      HKEY_LOCAL_MACHINE\Software\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_BLOCK_LMZ_SCRIPT
    に
      "unDonut.exe"=dword:0
          (新規→dowrd(32)値 を 名前:unDonut.exe  値:0 で作成)
    を(追加)設定すれば対処できるようです。
    試した範囲では xp(32)+ie7は両方okでした。
    vista(64)では HKEY_LOCAL_MACHINE\ では機能せず, HKEY_CURRENT_USER\ のほうを
    設定すれば機能しました。(セキュリティ的なことは各自で調べてみてください)


・vista では setup.exe(やdonutオプション)で関連付けが行えない。


・WEBページで右クリックメニューを出したとき、"名前をつけて背景を保存"等、
  機能しないメニュー項目が使用可能色で表示される。(背景に関しては使用上さして
  弊害ないし、対処するのは結構手間に思えるので修正しません）

・Donutのオプションで、ツールバー、キー、マウスジェスチャー、関連付け等にある
  リスト部分ににマウスで移動クリックするとエラー音が出てしまう.
  (デバッグコンパイルした場合は症状がかわりリスト中のカーソル移動のたびに
   エラー音がでてしまう)

・Donutオプションで、オプションに併記されているアクセラレータキーが全く効かない.

・リンクバーが高さがなく潰れて表示されてしまうことがある。
  改善策：
    Vista の場合は、まず一度 IE7 を立ち上げて IE7 のリンクバーを表示してみて
    ください。
    それ後で、unDonutでもリンクバーが表示されるようになるかもしれません。

    上記で駄目な場合や、vista以前のwin環境で潰れる場合、レジストリの
      HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\ToolBar
    に
      LinksFolderName
    というキーがあるかもしれません。
    通常はないのですが、これが設定されていると、その内容をリンクバーのフォルダ
    として使うことになります。が、指定されたフォルダが本物でない場合は無視され
    るか、表示が壊れる状態です。なので、もし、そのキーがあった場合は正しいパス
    を設定するか大丈夫そうならいっそキーを削除したほうがよいでしょう。
    (それでも壊れてるようなら、何か別のバグ)


・VistaでリンクバーがIE順にソートされない場合がありえる。
    一応対応しているのですが、状況によっては駄目な場合がありえます。

  ※Vistaでは、リンクバーで使われるお気に入りの"リンク"は、
    実際のディスクでの名前は "Links\" になっているのですが、
    ユーザが編集した表示順番に関してはリポジトリ
        Software\Microsoft\Windows\CurrentVersion\Explorer\MenuOrder\Favorites
    のキー
        リンク
    に情報が収められています。
    ところで、同じ場所にただのお気に入りフォルダとして"リンク\"も作成できてし
    まい、これで順番を編集するとレジストリはやっぱり"リンク"が使われます...
    順序情報がおかしくなるかもしれません。

    また、ディスクの "Links\"フォルダを削除&再作成したりすると、先のキー名が
    "Links"に変わってしまい、以後"Links"が使われます。古い"リンク"は残った
    ままで、Vista対応のソフトの場合逆にご認識していしまうかもしれません。


・vistaの場合、ページ読み込み中マークが出ているとき、タブのタイトル文字列の
  描画がはみ出すことがある。

・リンクやお気に入りを新規タブに非アクティブ状態で開いた場合、そのページに
　入力フォーム(スクリプト?)があると、スペースキーやENTERキー、マウスの
　中スクロール等の一部の入力が、アクティブページでなく非アクティブの
　新規ページ側に取られてしまうことがある。
　(2ch undonut part20スレ 100,102) 
　※IEコンポーネントが奪ってるらしい?

・ページに黒枠がつくことがある。
    手持ちではwin2k+ie6環境にて確認.(xp64,vista64では発生せず)
    黒淵というより、描画範囲が一回り(1,2ドット)内側になっている感じに見える。


・同一フォルダの unDonut.exe を複数起動していた場合、iniファイルの書き込み
  途中でも他のunDonutが読み取れるので、あたりどころが悪いと微妙に矛盾した
  設定が読み込まれてしまう可能性がある.
    ※ちゃんと修正するのが大変そうなのと、実害はあまりなさそうなので放置。
      （でも、オプションon/offに絡んだバグを聞くとこれも疑わしく...）


・スキンを切り替えた時、メニューバーにつく最小化、最大化、終了アイコンの
  位置がおかしくなることがある.


・タブ(窓)表示無しで、エクスプローラバーを出していると、F4等、キーが奪われ
　効かない(エクスプローラバー無しか、何か1つでもタブ表示があれば大丈夫)

・バグではないけれど、+mod.1.20付属のtoolbar.iniは、標準(内蔵)の配置とは別モノ
  になっている（そのこと忘れて、ツールバー壊れてると勘違いしたのは秘密）
  （ 表示(V)→ツールバー→ユーザー設定  で好みにどうぞ ）


・IEコンポーネントを使っているためか、機能によっては、urlをオープンする場合に
  undonut自身でなくurlに関連付けされたアプリで開ける状態のものがある。
  （履歴バーでurlを開く場合や、右クリックメニューにユーザー定義でurlを
    登録した場合等. 関連付けをすべてマークすればよいのですが、vistaでは
    関連付けがちゃんとできなかったりで）
  また、この処理を通って(関連付け経由で)ページが開けられる場合、やたら
  待ち時間が発生する場合がある。


・もはや仕様ですが、本家unDonutとunDonut+(mod)で、iniファイルが一部非互換に
  なってしまっている。
  ・文字列のtypo修正(AddressBar,Enable)
  ・"ページを平面的に表示"の機能追加時に、"ステータスバーのフィルタ"
    "マウス・ジェスチャー使用" "mailto無効" の値をずらして追加したようで
    本家unDonut.iniを読み込むとこれらの値のon/offが別になってしまう。
    search.iniやお気に入り(.url)で拡張プロパティを設定している場合も同様.


・拡縮を使うとスクロールバーまで拡縮する.
　（zoom.jsと同等なことをしていてie任せな処理なので、仕様）

・画像の自動リサイズ表示していると、そのページに対し、zoom.js等の拡大縮小の
　スクリプトが使いものにならない。
　（スクリプトと同じ機能を使っていて、また、左クリックによる拡大率⇔100%を
　　無理やり行っているため、そのようなスクリプトとは共存できません。仕様）


・複数のスキンを切り替えていると?、ツールバーの情報が腐ることがある
　(アイコンとテキストがマッチしなかったり、ドロップダウンボタンがなくなったり)
　→toolbar.iniを削除して再設定してください。


・バージョン情報の表示で、osのバージョンがvistaなのにxp,win2kと表示される。
  →undonut.exeをxp,win2k互換にしていたり、あるいは、xp,win2k互換にした
    ファイラ等のアプリからundonutを起動した場合、undonut.exeのos情報は
    互換モードのosの名がでます。
  本来のosのバージョン以外に設定していると誤動作する場合があるので、
  （特にvista)、しないでください。

・ウィンドウのデザインでボタンサイズを変更していたり、標準的でない
　XP Theme(Vistaの場合も含む)を適応したばあい、検索バーやアドレスバーの
　表示が、窓やボタンの描画範囲がおかしかったり、ゴミがのこったりする。
　(undonut自前のflatComboBoxがらみ)


★以下は、こちらでは再現していないバグ.

・マウスジェスチャーが利かなくなる、オプションのチェックが外れる環境がある。
  関連報告複数。
  ただ、こちらでは未経験(再現方法わからず)。
  ・ページ別のマウスジェスチャー指定がoffになってる
  ・Donutオプション側のマウスジェスチャー指定がoffになってる
  同根バグでなく、複数の別々のバグの可能性もある？
  ※本家unDonutとのiniファイルの非互換の影響が原因で、再設定したら直る?

・"ページを平面的に表示する"のon/off が逆になる環境がある。

・スクリプトONのページに対してBookmarkletを使うとスクリプトがOFFになってしまい
　Bookmarkletが使えない.

・フォルダのショートカットをお気に入りに置いた状態でそれを開き、中にある画像
　ファイルをタブにD&Dするとその時またはファイルを閉じる時に落ちる。

・一度トレイアイコン化すると、他のアプリからundonut+modを外部起動した場合、
　トレイ化と窓化がトグルに行われてしまう。
　（試し方がまずかっただけかも? 違う症状?だけどヘンに思える挙動あり。
　　ただ外部起動関係はuacのためかデバッグ面倒なんで後回）

